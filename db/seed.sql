-- קה״דיה - מערכת ניהול שבצ״ק - Seed Data (PRD Compliant)
-- Demo data including "דוד ישראלי" as specified in PRD Section 14

-- Insert Populations (אוכלוסיות)
INSERT INTO populations (name, notes) VALUES
('קבע', 'שירות קבע'),
('חובה', 'שירות חובה'),
('מילואים', 'שירות מילואים'),
('אזרחים', 'עובדים אזרחים');

-- Insert Skills (כשירויות)
INSERT INTO skills (name, notes) VALUES
('תקשורת', 'הפעלת מערכות תקשורת'),
('סייבר', 'אבטחת מידע וסייבר'),
('מבצעים', 'תכנון וביצוע מבצעים'),
('לוגיסטיקה', 'ניהול אספקה ותחזוקה'),
('מודיעין', 'איסוף וניתוח מודיעין'),
('רפואה', 'עזרה ראשונה ורפואה'),
('נהיגה', 'רישיון נהיגה צבאי'),
('אמל״ח', 'תחזוקת אמצעי לחימה'),
('מחשבים', 'מערכות מחשב ותוכנה');

-- Insert Departments (מחלקות)
INSERT INTO departments (name, notes) VALUES
('מוקד תקשורת', 'מוקד תקשורת ראשי'),
('חמ״ל מבצעים', 'חדר מבצעים'),
('אבטחת מידע', 'יחידת סייבר ואבטחת מידע'),
('מודיעין', 'איסוף וניתוח מודיעין'),
('לוגיסטיקה', 'אספקה ותחזוקה'),
('תחזוקה', 'תחזוקת ציוד ומערכות');

-- Insert Personnel (תיקים אישיים) - Including "דוד ישראלי" as per PRD
INSERT INTO personnel (full_name, personal_number, rank, branch, residence, phone, population_id, department_id, is_commander, id_number, birth_date, enlistment_date, discharge_date, arrival_date, marital_status, course_cycle, notes) VALUES
-- דוד ישראלי - as specified in PRD Section 14
('דוד ישראלי', '1234567', 'רב״ט', 'תקשורת', 'תל אביב', '050-1234567', 2, 1, 1, '123456789', '1995-03-15', '2020-01-15', '2023-01-15', '2020-02-01', 'רווק', 'מחזור 156', 'מפקד עמדה מנוסה'),
('שרה כהן', '1234568', 'סמל', 'מבצעים', 'ירושלים', '050-2345678', 1, 2, 0, '123456790', '1992-07-22', '2018-03-01', '2025-03-01', '2018-04-01', 'נשוי', 'קורס מפקדים', 'מומחית מערכות'),
('יוסי לוי', '1234569', 'סמ״ר', 'סייבר', 'חיפה', '050-3456789', 1, 3, 1, '123456791', '1990-11-10', '2016-08-15', '2026-08-15', '2016-09-01', 'נשוי', 'קורס אבטחת מידע', 'מומחה אבטחה'),
('רחל גולן', '1234570', 'רב״ט', 'מודיעין', 'באר שבע', '050-4567890', 2, 4, 0, '123456792', '1996-05-18', '2021-06-01', '2024-06-01', '2021-07-01', 'רווק', 'מחזור 162', 'אנליסטית מובילה'),
('אמיר רוזן', '1234571', 'סמל', 'לוגיסטיקה', 'נתניה', '050-5678901', 1, 5, 1, '123456793', '1988-12-03', '2015-01-20', '2025-01-20', '2015-02-15', 'נשוי', 'קורס לוגיסטיקה', 'קצין לוגיסטיקה'),
('מירי אבני', '1234572', 'רב״ט', 'תחזוקה', 'אשדוד', '050-6789012', 2, 6, 0, '123456794', '1997-02-14', '2022-03-01', '2025-03-01', '2022-04-01', 'רווק', 'קורס טכנאים', 'טכנאית מומחית'),
('איתן ברק', '1234573', 'רב״ט', 'תקשורת', 'ראשון לציון', '050-7890123', 2, 1, 0, '123456795', '1996-09-25', '2021-11-01', '2024-11-01', '2021-12-01', 'רווק', 'מחזור 161', 'מפעיל מוקד'),
('נועה דן', '1234574', 'סמל', 'מבצעים', 'חולון', '050-8901234', 1, 2, 0, '123456796', '1993-04-12', '2019-02-15', '2026-02-15', '2019-03-15', 'נשוי', 'קורס רפואי', 'רפואית מבצעים'),
('רון גל', '1234575', 'רב״ט', 'סייבר', 'פתח תקווה', '050-9012345', 2, 3, 0, '123456797', '1995-08-07', '2020-10-01', '2023-10-01', '2020-11-01', 'רווק', 'קורס סייבר', 'מומחה סייבר'),
('תמר הרש', '1234576', 'רב״ט', 'מודיעין', 'רמת גן', '050-0123456', 2, 4, 0, '123456798', '1996-01-30', '2021-04-15', '2024-04-15', '2021-05-15', 'רווק', 'מחזור 159', 'אנליסטית מתקדמת');

-- Update departments with commanders
UPDATE departments SET commander_id = 1 WHERE name = 'מוקד תקשורת';  -- דוד ישראלי
UPDATE departments SET commander_id = 3 WHERE name = 'אבטחת מידע';   -- יוסי לוי
UPDATE departments SET commander_id = 5 WHERE name = 'לוגיסטיקה';     -- אמיר רוזן

-- Insert Person Skills (כשירויות אישיות)
INSERT INTO person_skills (person_id, skill_id, status, training_start_date, training_end_date, expiry_date, notes) VALUES
-- דוד ישראלי skills
(1, 1, 'מוסמך כשיר', NULL, NULL, '2024-01-15', 'מפעיל מוקד ראשי'),
(1, 7, 'מוסמך כשיר', NULL, NULL, '2024-12-01', 'רישיון צבאי'),
-- שרה כהן skills
(2, 3, 'מוסמך כשיר', NULL, NULL, '2024-03-01', 'מפקדת משמרת'),
(2, 6, 'מוסמך כשיר', NULL, NULL, '2024-06-01', 'פרמדיק'),
-- יוסי לוי skills
(3, 2, 'מוסמך כשיר', NULL, NULL, '2025-08-15', 'מומחה אבטחה'),
(3, 9, 'מוסמך כשיר', NULL, NULL, '2024-11-10', 'מנהל מערכות'),
-- רחל גולן skills
(4, 5, 'מוסמך כשיר', NULL, NULL, '2024-06-01', 'אנליסטית'),
(4, 9, 'בתהליך הסמכה', '2024-07-01', '2024-12-01', NULL, 'קורס מערכות מידע'),
-- אמיר רוזן skills
(5, 4, 'מוסמך כשיר', NULL, NULL, '2025-01-20', 'קצין אספקה'),
(5, 7, 'מוסמך כשיר', NULL, NULL, '2024-12-03', 'רישיון משאית'),
-- מירי אבני skills
(6, 8, 'מוסמך כשיר', NULL, NULL, '2025-03-01', 'טכנאית מומחית'),
(6, 7, 'מוסמך כשיר', NULL, NULL, '2024-02-14', 'רישיון רכב'),
-- Additional skills
(7, 1, 'מוסמך כשיר', NULL, NULL, '2024-11-01', 'מפעיל תקשורת'),
(8, 6, 'מוסמך כשיר', NULL, NULL, '2025-02-15', 'פרמדיק'),
(9, 2, 'בתהליך הסמכה', '2024-06-01', '2024-12-01', NULL, 'קורס סייבר מתקדם'),
(10, 5, 'מוסמך כשיר', NULL, NULL, '2024-04-15', 'אנליסטית');

-- Insert Positions (עמדות)
INSERT INTO positions (name, notes) VALUES
('מוקד תקשורת', 'מוקד תקשורת ראשי 24/7'),
('חמ״ל מבצעים', 'חדר מצב מבצעי'),
('אבטחת מידע', 'עמדת סייבר ומעקב'),
('מודיעין', 'עמדת איסוף וניתוח'),
('לוגיסטיקה', 'בקרת אספקה'),
('תחזוקה', 'בקרת תחזוקה ותיקונים');

-- Insert Roles (תפקידנים)
INSERT INTO roles (position_id, name, notes) VALUES
-- מוקד תקשורת roles
(1, 'מפעיל ראשי', 'אחראי משמרת'),
(1, 'מפעיל משני', 'מפעיל עזר'),
-- חמ״ל מבצעים roles  
(2, 'קצין מבצעים', 'אחראי חדר מצב'),
(2, 'רפואי', 'תמיכה רפואית'),
-- אבטחת מידע roles
(3, 'אנליסט סייבר', 'מעקב וניתוח איומים'),
-- מודיעין roles
(4, 'אנליסט מודיעין', 'איסוף וניתוח מידע'),
-- לוגיסטיקה roles
(5, 'קצין אספקה', 'ניהול מלאים'),
-- תחזוקה roles
(6, 'טכנאי ראשי', 'אחראי תחזוקה'),
(6, 'טכנאי עזר', 'תמיכה טכנית');

-- Insert Role Skills (דרישות כשירות)
INSERT INTO role_skills (role_id, skill_id, is_mandatory) VALUES
-- מפעיל ראשי - requires תקשורת
(1, 1, 1),
-- מפעיל משני - requires תקשורת  
(2, 1, 1),
-- קצין מבצעים - requires מבצעים
(3, 3, 1),
-- רפואי - requires רפואה
(4, 6, 1),
-- אנליסט סייבר - requires סייבר
(5, 2, 1),
(5, 9, 0), -- מחשבים optional
-- אנליסט מודיעין - requires מודיעין  
(6, 5, 1),
-- קצין אספקה - requires לוגיסטיקה
(7, 4, 1),
(7, 7, 0), -- נהיגה optional
-- טכנאי ראשי - requires אמל״ח
(8, 8, 1),
-- טכנאי עזר - requires אמל״ח
(9, 8, 1);

-- Insert Schedule Weeks (שבצ״ק שבועי)
INSERT INTO schedule_weeks (position_id, week_start, notes) VALUES
-- Current week schedules for positions
(1, '2025-08-10', 'שבצ״ק שוטף מוקד תקשורת'), -- מוקד תקשורת
(2, '2025-08-10', 'משמרות חמ״ל'), -- חמ״ל מבצעים  
(3, '2025-08-10', 'משמרות סייבר'); -- אבטחת מידע

-- Insert Time Blocks (טווחי שעות) - Fixed time format
INSERT INTO time_blocks (schedule_week_id, start_time, end_time) VALUES
-- מוקד תקשורת - 3 shifts
(1, '08:00', '14:00'), -- Morning shift
(1, '14:00', '20:00'), -- Afternoon shift  
(1, '20:00', '23:59'), -- Night shift (ends at midnight)
-- חמ״ל מבצעים - 2 shifts
(2, '08:00', '20:00'), -- Day shift
(2, '20:00', '23:59'), -- Night shift (ends at midnight)
-- אבטחת מידע - 24/7 coverage
(3, '08:00', '16:00'), -- Day shift
(3, '16:00', '23:59'), -- Evening shift
(3, '00:00', '08:00'); -- Night shift

-- Insert Assignments (שיבוצים) - Including דוד ישראלי assignment per PRD
INSERT INTO assignments (time_block_id, role_id, day_of_week, person_id) VALUES
-- מוקד תקשורת assignments - דוד ישראלי on Monday morning shift as per PRD Section 14
(1, 1, 1, 1), -- דוד ישראלי - Monday morning shift as מפעיל ראשי
(1, 2, 1, 7), -- איתן ברק - Monday morning shift as מפעיל משני
(2, 1, 1, NULL), -- Unassigned afternoon shift Monday
(2, 2, 1, 2), -- שרה כהן - Monday afternoon as backup
-- חמ״ל מבצעים assignments
(4, 3, 1, 2), -- שרה כהן - Monday day shift as קצין מבצעים
(4, 4, 1, 8), -- נועה דן - Monday day shift as רפואי
-- אבטחת מידע assignments  
(6, 5, 1, 3), -- יוסי לוי - Monday day as אנליסט סייבר
(7, 5, 1, 9), -- רון גל - Monday evening as אנליסט סייבר
(8, 5, 1, NULL); -- Unassigned Monday night

-- Insert Constraints (אילוצים) - Fixed constraint types
INSERT INTO constraints (person_id, date, is_full_day, start_time, end_time, type, description) VALUES
-- Sample constraints for current week
(2, '2025-08-12', 1, NULL, NULL, 'חופשה', 'חופשה שנתית'),
(4, '2025-08-13', 0, '14:00', '18:00', 'אחר', 'פגישה אישית'),
(6, '2025-08-14', 1, NULL, NULL, 'מחלה', 'חופשת מחלה'),
(8, '2025-08-15', 0, '08:00', '12:00', 'קורס', 'קורס רענון'),
(10, '2025-08-16', 1, NULL, NULL, 'מילואים', 'גיוס מילואים');